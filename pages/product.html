<!doctype html>
<html lang="en">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Product - Groots</title>
<link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <header class="header">
    <div class="container wrap">
      <div class="brand">Groots Technoedge</div>
      <nav class="nav">
        <a href="../index.html">Home</a>
        <a href="collections.html">Collections</a>
        <a href="men.html">Men</a>
        <a href="women.html">Women</a>
        <a href="about.html">About</a>
        <a href="cart.html" style="position:relative;">
          Cart
          <span id="cart-count" style="position:absolute; top:-8px; right:-8px; background:var(--accent); color:#fff; border-radius:50%; width:20px; height:20px; display:none; align-items:center; justify-content:center; font-size:11px; font-weight:700;"></span>
        </a>
        <a href="contact.html" class="cta">Contact</a>
      </nav>
    </div>
  </header>
  <main class="container">
    <div class="product-detail">
      <div class="gallery">
        <img id="main-image" src="./womens_Boxy_fit_jacket .webp" alt="Product">
      </div>
      <div class="prod-info">
        <h2 id="prod-title">Product Title</h2>
        <div class="small" id="prod-price">MRP ₹0</div>
        <p class="small" style="margin-top:12px">Detailed description goes here. Replace with actual product copy.</p>
        <div style="margin-top:12px">
          <label for="size">Size</label>
          <select id="size"><option>S</option><option>M</option><option>L</option><option>XL</option></select>
        </div>
        <div style="margin-top:12px">
          <button id="add-to-bag-btn" type="button" style="padding:10px 14px; background:var(--accent); color:#fff; border-radius:8px; border:none; cursor:pointer; font-weight:600; width:100%; max-width:300px; position:relative; z-index:10; pointer-events:auto;">Add to Bag</button>
        </div>
      </div>
    </div>
  </main>
  <footer class="footer">
    <div class="inner">
      <div class="footer-grid">
        <div class="footer-col">
          <h3>Company</h3>
          <ul>
            <li><a href="about.html">Our Team</a></li>
            <li><a href="privacy.html">Privacy Policy</a></li>
            <li><a href="terms.html">Terms & Conditions</a></li>
            <li><a href="contact.html">Contact Us</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h3>Policies</h3>
          <ul>
            <li><a href="refund.html">Refund Policy</a></li>
            <li><a href="shipping.html">Shipping Policy</a></li>
            <li><a href="disclaimer.html">Disclaimer Policy</a></li>
            <li><a href="grievance.html">Grievance Policy</a></li>
            <li><a href="vendor.html">Seller Policy</a></li>
            <li><a href="cookie.html">Cookie Policy</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h3>Products</h3>
          <ul>
            <li><a href="women.html">Women's Apparel</a></li>
            <li><a href="men.html">Men's Apparel</a></li>
            <li><a href="collections.html">New Arrivals</a></li>
            <li><a href="collections.html">Sale Items</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <div class="footer-copyright">
          Copyright © 2025 <strong>Groots Technoedge Pvt. Ltd.</strong> All rights reserved.
        </div>
      </div>
    </div>
  </footer>
  <script src="../js/main.js"></script>
  <script>
    // Wait for DOM to be fully loaded
    document.addEventListener('DOMContentLoaded', function() {
      // Product catalog mapping to real images/titles used across the site
      // Prices match what's displayed on collections.html
      const PRODUCTS = {
        1: { title: 'Womens Boxy Fit Jacket', price: 1400, img: 'womens_Boxy_fit_jacket .webp' },
        2: { title: "Women's white printed Tshirts", price: 1600, img: 'Tshirts_for_women.jpg' },
        3: { title: 'Teal tshirt for men', price: 1800, img: 'teal_tshirts_men.webp' },
        4: { title: 'Standard length womens checked jacket', price: 1600, img: 'Standard _ength_checked_jacket.jpg' },
        5: { title: 'Oversized tshirts for men', price: 1200, img: 'Oversized_Tshirts_for_men.webp' },
        6: { title: 'Cargo Jacket for womens', price: 1500, img: 'Cargo jacket lightweight.jpg' },
        7: { title: 'Back printed women blue tshirt', price: 600, img: 'back printed women blue.webp' },
        8: { title: 'Vintage mens Baggy jeans', price: 1800, img: 'Vintage men baggy jeans.jpeg' },
        9: { title: 'Luxury Formal Shirt', price: 1300, img: 'Luxury Formal Shirt.jpg' },
        10: { title: "Men's Crimson red & midnight black", price: 1200, img: "Men's Crimson red & midnight black.webp" },
        11: { title: "Men's black and navy blue shirt", price: 1400, img: "Men's black and navy blue shirt.webp" },
        12: { title: 'Black and white lined shirt', price: 1000, img: 'Black and white lined shirt.webp' },
        13: { title: 'Sleeveless Hoodie', price: 1500, img: 'Sleeveless_hoodie.jpeg' },
        14: { title: 'Georgette fit and flare casual gown', price: 800, img: 'Georgette fit and flare casual gown.jpeg' },
        15: { title: '3 peice set', price: 1000, img: '3 peice set.jpeg' },
        16: { title: 'Masakali suit set', price: 1100, img: 'Masakali suit set.jpeg' },
        17: { title: 'Pink skirt set', price: 1200, img: 'Pink skirt set.jpeg' },
      };

      const params = new URLSearchParams(window.location.search);
      const pid = parseInt(params.get('pid') || '1', 10);
      const p = PRODUCTS[pid] || PRODUCTS[1];

      const imgEl = document.getElementById('main-image');
      if (imgEl) {
        imgEl.src = './' + p.img;
        imgEl.alt = p.title;
      }
      
      const titleEl = document.getElementById('prod-title');
      if (titleEl) {
        titleEl.textContent = p.title;
      }
      
      const priceEl = document.getElementById('prod-price');
      if (priceEl) {
        priceEl.textContent = 'MRP ₹' + p.price;
      }

      // Cart management functions
      function getCart() {
        const cart = localStorage.getItem('groots_cart');
        return cart ? JSON.parse(cart) : [];
      }

      function saveCart(cart) {
        localStorage.setItem('groots_cart', JSON.stringify(cart));
      }

      function addToCart(productId, size, quantity) {
        const cart = getCart();
        const existingItem = cart.find(item => item.id === productId.toString() && item.size === size);
        
        if (existingItem) {
          existingItem.quantity += quantity;
        } else {
          cart.push({
            id: productId.toString(),
            size: size,
            quantity: quantity
          });
        }
        
        saveCart(cart);
        return cart;
      }

      // Handle Add to Bag button
      const addToBagBtn = document.getElementById('add-to-bag-btn');
      if (addToBagBtn) {
        addToBagBtn.addEventListener('click', function(e) {
          e.preventDefault();
          const sizeSelect = document.getElementById('size');
          const size = sizeSelect ? sizeSelect.value : 'M';
          
          // Add to cart
          addToCart(pid, size, 1);
          
          // Update cart count immediately
          updateCartCount();
          
          // Show confirmation and redirect to cart
          if (confirm('Item added to cart! Would you like to view your cart?')) {
            window.location.href = 'cart.html';
          } else {
            // Optionally show a brief success message
            const originalText = addToBagBtn.textContent;
            addToBagBtn.textContent = 'Added!';
            addToBagBtn.style.background = '#10b981';
            setTimeout(() => {
              addToBagBtn.textContent = originalText;
              addToBagBtn.style.background = '';
            }, 2000);
          }
        });
      }
    });

    // Update cart count in header
    function updateCartCount() {
      const cart = localStorage.getItem('groots_cart');
      const count = cart ? JSON.parse(cart).reduce((sum, item) => sum + item.quantity, 0) : 0;
      const cartCountEl = document.getElementById('cart-count');
      if (cartCountEl) {
        if (count > 0) {
          cartCountEl.textContent = count;
          cartCountEl.style.display = 'flex';
        } else {
          cartCountEl.style.display = 'none';
        }
      }
    }
    updateCartCount();
  </script>
</body>
</html>